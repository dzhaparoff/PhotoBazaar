!function(){"use strict";function mousePanBg(){return{restrict:"A",link:function($scope,$element,$attr){function setPan(e){move=!0,mouseX=e.clientX-$element[0].getBoundingClientRect().left}function animate_on_mousemove(){var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(move&&$element.hasClass("mouse_pan_active")){move=!1;var elem_width=$element.width();if(ph_width>elem_width){var offsetXp=1-(elem_width-mouseX)/elem_width;offsetXp>1&&(offsetXp=1),$photo_maximized[0].style.backgroundPosition=100*offsetXp+"% 50%"}}requestID=requestAnimationFrame(animate_on_mousemove)}var move,mouseX,requestID,ph_width=$attr.width,$photo_maximized=($attr.height,$element.children(".photo_maximized"));$element[0].addEventListener("mousemove",setPan,!1),animate_on_mousemove(),$element.bind("$destroy",function(){$element[0].removeEventListener("mousemove",setPan,!1),window.cancelAnimationFrame(requestID),requestID=null})}}}angular.module("phb").directive("mousePanBg",mousePanBg)}();